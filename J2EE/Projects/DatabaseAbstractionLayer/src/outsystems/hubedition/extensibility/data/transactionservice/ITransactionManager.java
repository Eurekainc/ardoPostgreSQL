/* 
 This source code (the "Generated Software") is generated by the OutSystems Platform 
 and is licensed by OutSystems (http://www.outsystems.com) to You solely for testing and evaluation 
 purposes, unless You and OutSystems have executed a specific agreement covering the use terms and 
 conditions of the Generated Software, in which case such agreement shall apply. 
*/

package outsystems.hubedition.extensibility.data.transactionservice;

import java.sql.*;
import java.text.*;
import java.util.*;
import outsystems.hubedition.databaseabstractionlayer.adoadapters.*;
import outsystems.hubedition.extensibility.data.*;
import outsystems.hubedition.extensibility.data.configurationservice.*;
import outsystems.hubedition.util.*;
import outsystems.hubedition.util.delegates.*;
import outsystems.runtimecommon.*;
import java.math.BigDecimal;
import outsystems.hubedition.databaseabstractionlayer.adoadapters.ADOTransaction;



/**
 *	Represents a service to manage transactions.
 */
public interface ITransactionManager extends IDisposable
{
    
    /**
	 *	This property represents the ITransactionService associated with this transaction manager.
	 *	@return	The transaction service associated.
	 */
    public ITransactionService getTransactionService();
    
    /**
	 *	This property represents the ITransactionService associated with this transaction manager.
	 *	@param	value	The transaction service associated.
	 */
    public void setTransactionService(ITransactionService value);
    
    /**
	 *	Gets the number of busy transactions.
	 *	@return	The number of busy transactions.
	 */
    public int getBusyTransactionCount();
    
    /**
	 *	Returns a transaction to be used during a web request. This transaction is only committed or rolled back by invoking freeupResources.
	 *	@return	A transaction to be used in the applications.
	 *	@throws	java.sql.SQLException	If an error occurs while accessing the database.
	 */
    public ADOTransaction getRequestTransaction() throws SQLException;
    
    /**
	 *	Returns a transaction that is managed by extension developers. Extension developers explicitly commit or rollback this transaction.
	 *	@return	A private transaction managed by the user.
	 *	@throws	java.sql.SQLException	If an error occurs while accessing the database.
	 */
    public ADOTransaction getCommitableTransaction() throws SQLException;
    
    /**
	 *	Returns a transaction with read only access suitable to iterate results.
	 *	@return	A Transaction only for read purposes.
	 *	@throws	java.sql.SQLException	If an error occurs while accessing the database.
	 */
    public ADOTransaction getReadOnlyTransaction() throws SQLException;
    
    /**
	 *	Releases a transaction to the pool.
	 *	@param	trans	Transaction to be released.
	 *	@throws	outsystems.hubedition.extensibility.data.transactionservice.InvalidTransactionReleaseException	Occurs when it's not possible to release the transaction.
                        @throws	java.sql.SQLException	If an error occurs while detecting the version.
	 */
    public void releaseTransaction(ADOTransaction trans) throws InvalidTransactionReleaseException, SQLException;
    
    /**
	 *	Commits a transaction.
	 *	@param	trans	The transaction to be committed.
	 *	@throws	outsystems.hubedition.extensibility.data.transactionservice.InvalidCommitOrRollbackTransactionException	Occurs when it's not possible to commit or rollback the transaction.
	 */
    public void commitTransaction(ADOTransaction trans) throws InvalidCommitOrRollbackTransactionException;
    
    /**
	 *	Rolls back a transaction.
	 *	@param	trans	The transaction to be rolled back
	 *	@throws	outsystems.hubedition.extensibility.data.transactionservice.InvalidCommitOrRollbackTransactionException	Occurs when it's not possible to commit or rollback the transaction.
	 */
    public void rollbackTransaction(ADOTransaction trans) throws InvalidCommitOrRollbackTransactionException;
    
    /**
	 *	Commits all transactions.
	 *	@throws	java.sql.SQLException	If an error occurs while accessing the database.
	 */
    public void commitAllTransactions() throws SQLException;
    
    /**
	 *	Rolls back all transactions.
	 *	@throws	java.sql.SQLException	If an error occurs while accessing the database.
	 */
    public void rollbackAllTransactions() throws SQLException;
    
    /**
	 *	Releases all database resources being used. All transactions are committed or rolled back, and connections are returned to the pool.
	 *	@param	commit	If True, all transaction are committed. Otherwise, are rolled back.
	 */
    public void freeupResources(boolean commit);
    
    /**
	 *	Associates a reader to a transaction.
	 *	@param	trans	The transaction that will be associated with the reader.
	 *	@param	reader	The reader to associate.
	 *	@return	Returns True if the reader was successfully associated, False otherwise.
	 */
    public boolean associateReader(ADOTransaction trans, OSResultSet reader);
    
    /**
	 *	Checks if this manager is managing a given transaction.
	 *	@param	trans	A transaction.
	 *	@return	Returns True if the transaction belongs to this transaction manager, False otherwise.
	 */
    public boolean isManaging(ADOTransaction trans);
    
    /**
	 *	Aborts a transaction and releases it.
	 *	@param	trans	Transaction to be aborted.
	 *	@throws	java.sql.SQLException	If an error occurs while accessing the database.
	 */
    public void abortTransaction(ADOTransaction trans) throws SQLException;
}
